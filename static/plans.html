<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MealCloud ‚Äî Plans & Menus</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Poppins:wght@500;700&display=swap"
    rel="stylesheet">
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <style>
    :root {
      --black: #000;
      --white: #fff;
      --accent-yellow: #ffcc00;
      --muted: #6c757d;
      --bg-light: #f8f9fa;
      --primary: #0d6efd;
      --card-bg: #ffffff;
      --alert-red: #cc2f42;
      --success-green: #28a745;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-light);
      color: var(--black);
    }

    /* Add background image to the body */
    body {
      background-image: url("images/Main-Background.png");
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      background-attachment: fixed;
    }



    .navbar-brand img {
      max-height: 40px;
    }

    .page-hero {
      padding: 48px 0;
      text-align: center;
    }

    .page-hero h1 {
      font-size: 2.25rem;
      font-weight: 700;
    }

    .page-hero p {
      color: var(--muted);
      margin-bottom: 0.5rem;
    }

    .plans-grid .card {
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
      border: none;
      background: var(--card-bg);
      transition: transform 0.2s;
    }

    .plans-grid .card:hover {
      transform: translateY(-5px);
    }

    .food-plan-rate {
      font-size: 2.5rem;
      font-weight: 800;
      margin: 0;
    }

    .food-plan-month {
      color: var(--muted);
      margin-bottom: 14px;
      font-weight: 600;
    }

    .food-plan-ul {
      list-style: disc;
      padding-left: 18px;
      text-align: left;
      color: #333;
      margin-bottom: 16px;
    }

    .cta-row {
      text-align: center;
      margin-top: 20px;
    }

    .register-button {
      background: var(--primary);
      color: var(--white);
      padding: 10px 18px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .register-button:hover {
      background: #0056b3;
    }

    .register-button:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }

    .customize-button {
      background: transparent;
      border: 2px solid rgba(0, 0, 0, 0.08);
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .customize-button:hover {
      background-color: var(--accent-yellow);
      border-color: var(--accent-yellow);
      color: var(--black);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 204, 0, 0.3);
    }

    .viewmenu-button {
      background: transparent;
      border: 1px dashed rgba(0, 0, 0, 0.12);
      padding: 8px 14px;
      border-radius: 8px;
      margin-left: 8px;
      cursor: pointer;
    }

    .text-yellow {
      color: var(--accent-yellow);
    }

    .footer {
      background: #101010;
      color: #fff;
      padding: 40px 0;
      margin-top: 48px;
    }

    .menu-section h6 {
      font-weight: 700;
      margin-top: 8px;
    }

    .menu-item {
      margin-bottom: 6px;
    }

    /* Customer Info Modal Styles */
    .customer-modal .form-control {
      margin-bottom: 15px;
    }

    .alert {
      margin-top: 10px;
    }

    /* Loading state */
    .btn-loading {
      position: relative;
    }

    .btn-loading::after {
      content: "";
      position: absolute;
      width: 16px;
      height: 16px;
      margin: auto;
      border: 2px solid transparent;
      border-top-color: #ffffff;
      border-radius: 50%;
      animation: spin 1s ease infinite;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    @media(min-width:992px) {
      .plans-grid .card {
        min-height: 280px;
      }
    }
  </style>
</head>

<body>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg bg-white shadow-sm">
    <div class="container">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navmenu">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="about-us.html">About</a></li>
          <li class="nav-item"><a class="nav-link active" href="plans.html">Plans</a></li>
          <li class="nav-item"><a class="nav-link" href="contact-us.html">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <section class="page-hero">
    <div class="container">
      <h1>Our <span class="text-yellow">Food Plans</span></h1>
      <p>Choose a plan that fits your appetite ‚Äî weekly and monthly subscription options with authentic Indian cuisine.
      </p>
    </div>
  </section>

  <!-- PLANS -->
  <section class="container plans-grid pb-5">
    <div class="row g-4">
      <!-- Plan 1: ‚Çπ999 Per Week (7 veg days) -->
      <div class="col-md-6 col-lg-3">
        <div class="card text-center">
          <div class="card-body d-flex flex-column">
            <h3 class="food-plan-rate">‚Çπ999</h3>
            <h5 class="food-plan-month">Per Week</h5>
            <ul class="food-plan-ul mb-3">
              <li>7 veg days</li>
              <li>For vegetarians</li>
            </ul>
            <div class="mt-auto">
              <button class="register-button subscribe-btn" data-plan-id="veg_week" data-amount="99900"
                data-description="7 veg days weekly plan (‚Çπ999/week)">
                Subscribe
              </button>
              <button class="viewmenu-button" data-bs-toggle="modal" data-bs-target="#menuVegWeekModal">View
                Menu</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Plan 2: ‚Çπ2,999 Per Week (4 veg + 3 nonveg) -->
      <div class="col-md-6 col-lg-3">
        <div class="card text-center">
          <div class="card-body d-flex flex-column">
            <h3 class="food-plan-rate">‚Çπ2,999</h3>
            <h5 class="food-plan-month">Per Week</h5>
            <ul class="food-plan-ul mb-3">
              <li>4 veg days</li>
              <li>3 nonveg days</li>
            </ul>
            <div class="mt-auto">
              <button class="register-button subscribe-btn" data-plan-id="mixed_week" data-amount="299900"
                data-description="4 veg + 3 nonveg weekly plan (‚Çπ2,999/week)">
                Subscribe
              </button>
              <button class="viewmenu-button" data-bs-toggle="modal" data-bs-target="#menuMixedWeekModal">View
                Menu</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Plan 3: ‚Çπ3,999 Per Month (30 veg days) -->
      <div class="col-md-6 col-lg-3">
        <div class="card text-center">
          <div class="card-body d-flex flex-column">
            <h3 class="food-plan-rate">‚Çπ3,999</h3>
            <h5 class="food-plan-month">Per Month</h5>
            <ul class="food-plan-ul mb-3">
              <li>30 veg days</li>
              <li>For vegetarians</li>
            </ul>
            <div class="mt-auto">
              <button class="register-button subscribe-btn" data-plan-id="veg_month" data-amount="399900"
                data-description="30 veg days monthly plan (‚Çπ3,999/month)">
                Subscribe
              </button>
              <button class="viewmenu-button" data-bs-toggle="modal" data-bs-target="#menuVegMonthModal">View
                Menu</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Plan 4: ‚Çπ5,999 Per Month (30 non days / Other Plans) -->
      <div class="col-md-6 col-lg-3">
        <div class="card text-center">
          <div class="card-body d-flex flex-column">
            <h3 class="food-plan-rate">‚Çπ5,999</h3>
            <h5 class="food-plan-month">Per Month</h5>
            <ul class="food-plan-ul mb-3">
              <li>30 non-veg days</li>
              <li>Other plans available</li>
            </ul>
            <div class="mt-auto">
              <button class="register-button subscribe-btn" data-plan-id="nonveg_month" data-amount="599900"
                data-description="30 non-veg days monthly plan (‚Çπ5,999/month)">
                Subscribe
              </button>
              <button class="viewmenu-button" data-bs-toggle="modal" data-bs-target="#menuNonvegMonthModal">View
                Menu</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- CTA / note -->
    <div class="row">
      <div class="col-12 cta-row">
        <p class="mt-4">Not sure which plan fits? <button class="customize-button ms-2" data-bs-toggle="modal"
            data-bs-target="#customizePlanModal">Customize Plan</button></p>
      </div>
    </div>
  </section>

  <!-- CUSTOMER INFO MODAL -->
  <div class="modal fade" id="customerModal" tabindex="-1" aria-labelledby="customerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered customer-modal">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="customerModalLabel">Enter Your Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="customerForm">
            <input type="text" class="form-control" id="customerName" placeholder="Full Name" required>
            <input type="email" class="form-control" id="customerEmail" placeholder="Email Address" required>
            <input type="tel" class="form-control" id="customerPhone" placeholder="Phone Number" required>
          </form>
          <div id="customerAlert" class="alert" style="display: none;"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="proceedPayment">Proceed to Payment</button>
        </div>
      </div>
    </div>
  </div>

  <!-- MENU MODALS -->

  <!-- Veg Weekly Modal -->
  <div class="modal fade" id="menuVegWeekModal" tabindex="-1" aria-labelledby="menuVegWeekLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="menuVegWeekLabel">Sample Menu ‚Äî ‚Çπ999 / Week (7 veg days, Kerala cuisine)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>A Kerala-style vegetarian weekly plan ‚Äî traditional rice-based breakfasts, coconut-flavored curries, and
            homely dinners.</p>

          <div class="menu-section">
            <h6>Breakfast</h6>
            <div class="menu-item">Puttu with kadala curry</div>
            <div class="menu-item">Appam with vegetable stew</div>
            <div class="menu-item">Idiyappam with coconut milk</div>
            <div class="menu-item">Dosa with sambar and chutney</div>

            <h6>Lunch</h6>
            <div class="menu-item">Matta rice (Kerala rice)</div>
            <div class="menu-item">Sambar or Rasam</div>
            <div class="menu-item">Avial / Thoran (vegetable side)</div>
            <div class="menu-item">Pulissery or Kaalan curry</div>
            <div class="menu-item">Papadam & pickle</div>

            <h6>Evening Snack</h6>
            <div class="menu-item">Banana fritters (Pazham pori)</div>
            <div class="menu-item">Chai / South Indian filter coffee</div>

            <h6>Dinner</h6>
            <div class="menu-item">Chapati</div>
            <div class="menu-item">Vegetable kurma / Kadala curry</div>
            <div class="menu-item">Light thoran or mezhukkupuratti</div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="register-button subscribe-btn" data-plan-id="veg_week" data-amount="99900"
            data-description="7 veg days weekly plan (‚Çπ999/week)" data-bs-dismiss="modal">Subscribe to this
            Plan</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mixed Weekly Modal (4 veg + 3 nonveg) -->
  <div class="modal fade" id="menuMixedWeekModal" tabindex="-1" aria-labelledby="menuMixedWeekLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="menuMixedWeekLabel">Sample Menu ‚Äî ‚Çπ2,999 / Week (4 Veg + 3 Non-Veg Kerala days)
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>A balanced weekly plan with vegetarian staples on some days and Kerala-style non-veg specials (fish,
            chicken, egg) on others.</p>

          <div class="menu-section">
            <h6>Veg Day Example</h6>
            <div class="menu-item">Breakfast: Appam with stew</div>
            <div class="menu-item">Lunch: Matta rice + Avial + Sambar + Thoran</div>
            <div class="menu-item">Snack: Banana chips + Tea</div>
            <div class="menu-item">Dinner: Chapati + Kadala curry</div>

            <h6>Non-Veg Day Example</h6>
            <div class="menu-item">Breakfast: Egg roast with puttu</div>
            <div class="menu-item">Lunch: Kerala fish curry (meen curry) + Rice + Upperi</div>
            <div class="menu-item">Snack: Pazham pori (banana fritters) + Coffee</div>
            <div class="menu-item">Dinner: Malabar parotta + Chicken curry</div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="register-button subscribe-btn" data-plan-id="mixed_week" data-amount="299900"
            data-description="4 veg + 3 nonveg weekly plan (‚Çπ2,999/week)" data-bs-dismiss="modal">Subscribe to this
            Plan</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Veg Monthly Modal -->
  <div class="modal fade" id="menuVegMonthModal" tabindex="-1" aria-labelledby="menuVegMonthLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="menuVegMonthLabel">Sample Menu ‚Äî ‚Çπ3,999 / Month (30 Veg Kerala-style Days)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>A monthly vegetarian plan featuring wholesome South Indian meals ‚Äî perfect for consistent healthy eating.
          </p>
          <div class="menu-section">
            <h6>Typical Day</h6>
            <div class="menu-item">Breakfast: Idli/Dosa with sambar and chutney</div>
            <div class="menu-item">Lunch: Rice + Pulissery or Rasam + Thoran + Avial</div>
            <div class="menu-item">Snack: Suhari (fried wheat snack) + Filter coffee</div>
            <div class="menu-item">Dinner: Chapati + Veg Kurma + Cabbage thoran</div>

            <h6>Variation Across Week</h6>
            <div class="menu-item">Appam with stew</div>
            <div class="menu-item">Vegetable biriyani (Friday special)</div>
            <div class="menu-item">Kootu curry with rice on weekends</div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="register-button subscribe-btn" data-plan-id="veg_month" data-amount="399900"
            data-description="30 veg days monthly plan (‚Çπ3,999/month)" data-bs-dismiss="modal">Subscribe to this
            Plan</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Non-Veg Monthly Modal -->
  <div class="modal fade" id="menuNonvegMonthModal" tabindex="-1" aria-labelledby="menuNonvegMonthLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="menuNonvegMonthLabel">Sample Menu ‚Äî ‚Çπ5,999 / Month (30 Non-Veg Kerala-style Days)
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>A hearty monthly non-vegetarian plan featuring fish, chicken, and egg delicacies along with traditional
            Kerala accompaniments.</p>

          <div class="menu-section">
            <h6>Typical Day</h6>
            <div class="menu-item">Breakfast: Parotta + Egg curry</div>
            <div class="menu-item">Lunch: Matta rice + Fish curry + Mezhukkupuratti</div>
            <div class="menu-item">Snack: Beef cutlet / Egg puffs with tea</div>
            <div class="menu-item">Dinner: Chicken roast + Chapati</div>

            <h6>Weekend Specials</h6>
            <div class="menu-item">Kerala seafood biriyani</div>
            <div class="menu-item">Mutton curry with appam</div>
            <div class="menu-item">Karimeen pollichathu (Pearl spot fish grilled in banana leaf)</div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="register-button subscribe-btn" data-plan-id="nonveg_month" data-amount="599900"
            data-description="30 non-veg days monthly plan (‚Çπ5,999/month)" data-bs-dismiss="modal">Subscribe to this
            Plan</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- CUSTOMIZE PLAN MODAL -->
  <div class="modal fade" id="customizePlanModal" tabindex="-1" aria-labelledby="customizePlanLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="customizePlanLabel">Customize Your Plan üçΩÔ∏è</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="customPlanForm">
            <!-- Plan Type -->
            <div class="mb-4">
              <label class="form-label fw-bold">Choose Plan Type</label>
              <div class="row g-2">
                <div class="col-4">
                  <input type="radio" class="btn-check" name="planType" id="typeVeg" value="veg" checked>
                  <label class="btn btn-outline-primary w-100" for="typeVeg">
                    <i class="fas fa-leaf"></i><br>Vegetarian
                  </label>
                </div>
                <div class="col-4">
                  <input type="radio" class="btn-check" name="planType" id="typeNonVeg" value="nonveg">
                  <label class="btn btn-outline-primary w-100" for="typeNonVeg">
                    <i class="fas fa-drumstick-bite"></i><br>Non-Vegetarian
                  </label>
                </div>
                <div class="col-4">
                  <input type="radio" class="btn-check" name="planType" id="typeMixed" value="mixed">
                  <label class="btn btn-outline-primary w-100" for="typeMixed">
                    <i class="fas fa-utensils"></i><br>Mixed
                  </label>
                </div>
              </div>
            </div>

            <!-- Duration -->
            <div class="mb-4">
              <label class="form-label fw-bold">Duration</label>
              <div class="row g-2">
                <div class="col-6">
                  <input type="radio" class="btn-check" name="duration" id="durationWeek" value="weekly" checked>
                  <label class="btn btn-outline-primary w-100" for="durationWeek">Weekly (7 days)</label>
                </div>
                <div class="col-6">
                  <input type="radio" class="btn-check" name="duration" id="durationMonth" value="monthly">
                  <label class="btn btn-outline-primary w-100" for="durationMonth">Monthly (30 days)</label>
                </div>
              </div>
            </div>

            <!-- Meals Selection -->
            <div class="mb-4">
              <label class="form-label fw-bold">Select Meals</label>
              <div class="form-check">
                <input class="form-check-input meal-check" type="checkbox" value="breakfast" id="mealBreakfast" checked>
                <label class="form-check-label" for="mealBreakfast">
                  Breakfast <span class="text-muted">(+‚Çπ30/day)</span>
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input meal-check" type="checkbox" value="lunch" id="mealLunch" checked>
                <label class="form-check-label" for="mealLunch">
                  Lunch <span class="text-muted">(+‚Çπ50/day)</span>
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input meal-check" type="checkbox" value="snacks" id="mealSnacks">
                <label class="form-check-label" for="mealSnacks">
                  Evening Snacks <span class="text-muted">(+‚Çπ20/day)</span>
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input meal-check" type="checkbox" value="dinner" id="mealDinner" checked>
                <label class="form-check-label" for="mealDinner">
                  Dinner <span class="text-muted">(+‚Çπ40/day)</span>
                </label>
              </div>
            </div>

            <!-- Add-ons -->
            <div class="mb-4">
              <label class="form-label fw-bold">Special Add-ons</label>
              <div class="form-check">
                <input class="form-check-input addon-check" type="checkbox" value="dessert" id="addonDessert">
                <label class="form-check-label" for="addonDessert">
                  Weekend Desserts (Payasam/Halwa) <span class="text-muted">(+‚Çπ200/week)</span>
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input addon-check" type="checkbox" value="biriyani" id="addonBiriyani">
                <label class="form-check-label" for="addonBiriyani">
                  Sunday Special Biriyani <span class="text-muted">(+‚Çπ150/week)</span>
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input addon-check" type="checkbox" value="juice" id="addonJuice">
                <label class="form-check-label" for="addonJuice">
                  Fresh Juice with Breakfast <span class="text-muted">(+‚Çπ25/day)</span>
                </label>
              </div>
            </div>

            <!-- Dietary Preferences -->
            <div class="mb-4">
              <label class="form-label fw-bold">Dietary Preferences</label>
              <div class="row g-2">
                <div class="col-6">
                  <label class="form-label">Spice Level</label>
                  <select class="form-select" id="spiceLevel">
                    <option value="mild">Mild üå±</option>
                    <option value="medium" selected>Medium üå∂Ô∏è</option>
                    <option value="spicy">Spicy üî•</option>
                  </select>
                </div>
                <div class="col-6">
                  <label class="form-label">Oil Preference</label>
                  <select class="form-select" id="oilPreference">
                    <option value="regular" selected>Regular</option>
                    <option value="less">Less Oil</option>
                    <option value="minimal">Minimal Oil</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Special Instructions -->
            <div class="mb-4">
              <label class="form-label fw-bold">Special Instructions</label>
              <textarea class="form-control" id="specialInstructions" rows="2"
                placeholder="E.g., No onions, Jain meals, Allergies..."></textarea>
            </div>

            <!-- Price Summary -->
            <div class="card bg-light">
              <div class="card-body">
                <h6 class="fw-bold mb-3">Price Summary</h6>
                <div id="priceBreakdown">
                  <!-- Dynamic price breakdown will be inserted here -->
                </div>
                <hr>
                <div class="d-flex justify-content-between align-items-center">
                  <h5 class="mb-0">Total Amount:</h5>
                  <h4 class="mb-0 text-primary" id="totalPrice">‚Çπ0</h4>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="subscribeCustomPlan">
            Subscribe to Custom Plan
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6 text-md-start text-center">
          <h5>Enjoy your <span class="text-yellow">Delicious Food</span></h5>
          <p class="mb-0">support@SuraMess.com ‚Ä¢ 999999999</p>
        </div>
        <div class="col-md-6 text-md-end text-center mt-3 mt-md-0">
          <a href="#" class="text-white me-3"><i class="fab fa-facebook"></i></a>
          <a href="#" class="text-white me-3"><i class="fab fa-instagram"></i></a>
          <a href="#" class="text-white"><i class="fab fa-twitter"></i></a>
        </div>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Global variables
    let selectedPlan = {};
    let customerDetails = {};

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', function () {
      // Add event listeners to all subscribe buttons
      document.querySelectorAll('.subscribe-btn').forEach(button => {
        button.addEventListener('click', handleSubscribeClick);
      });

      // Add event listener to proceed payment button
      document.getElementById('proceedPayment').addEventListener('click', handleProceedPayment);

      // Add form validation
      document.getElementById('customerForm').addEventListener('submit', function (e) {
        e.preventDefault();
        handleProceedPayment();
      });
    });

    // Handle subscribe button click
    function handleSubscribeClick(event) {
      const button = event.target;

      // Extract plan details from button attributes
      selectedPlan = {
        plan_id: button.getAttribute('data-plan-id'),
        amount: parseInt(button.getAttribute('data-amount')),
        description: button.getAttribute('data-description')
      };

      // Show customer info modal
      const customerModal = new bootstrap.Modal(document.getElementById('customerModal'));
      document.getElementById('customerModalLabel').textContent = `Subscribe to ${selectedPlan.description}`;
      customerModal.show();
    }

    // Handle proceed to payment
    function handleProceedPayment() {
      const name = document.getElementById('customerName').value.trim();
      const email = document.getElementById('customerEmail').value.trim();
      const phone = document.getElementById('customerPhone').value.trim();

      // Basic validation
      if (!name || !email || !phone) {
        showAlert('Please fill in all fields', 'danger');
        return;
      }

      if (!isValidEmail(email)) {
        showAlert('Please enter a valid email address', 'danger');
        return;
      }

      if (!isValidPhone(phone)) {
        showAlert('Please enter a valid phone number', 'danger');
        return;
      }

      // Store customer details
      customerDetails = { name, email, phone };

      // Start payment process
      initiatePayment();
    }

    // Validate email
    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    // Validate phone
    function isValidPhone(phone) {
      return /^[6-9]\d{9}$/.test(phone);
    }

    // Show alert in customer modal
    function showAlert(message, type) {
      const alertDiv = document.getElementById('customerAlert');
      alertDiv.className = `alert alert-${type}`;
      alertDiv.textContent = message;
      alertDiv.style.display = 'block';

      setTimeout(() => {
        alertDiv.style.display = 'none';
      }, 5000);
    }

    // Initiate payment process
    async function initiatePayment() {
      const proceedButton = document.getElementById('proceedPayment');

      try {
        // Show loading state
        proceedButton.disabled = true;
        proceedButton.classList.add('btn-loading');
        proceedButton.textContent = 'Processing...';

        // Create order on server
        const response = await fetch('/create_order', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            plan_id: selectedPlan.plan_id,
            amount: selectedPlan.amount,
            currency: 'INR',
            description: selectedPlan.description,
            customer: customerDetails
          })
        });

        if (!response.ok) {
          throw new Error('Failed to create order');
        }

        const orderData = await response.json();

        // Hide customer modal
        bootstrap.Modal.getInstance(document.getElementById('customerModal')).hide();

        // Launch Razorpay checkout
        launchRazorpayCheckout(orderData);

      } catch (error) {
        console.error('Error creating order:', error);
        showAlert('Failed to process payment. Please try again.', 'danger');
      } finally {
        // Reset button state
        proceedButton.disabled = false;
        proceedButton.classList.remove('btn-loading');
        proceedButton.textContent = 'Proceed to Payment';
      }
    }

    // Launch Razorpay checkout
    function launchRazorpayCheckout(orderData) {
      const options = {
        key: orderData.key,
        amount: orderData.amount,
        currency: orderData.currency,
        name: 'MealCloud',
        description: selectedPlan.description,
        order_id: orderData.order_id,
        prefill: {
          name: customerDetails.name,
          email: customerDetails.email,
          contact: customerDetails.phone
        },
        theme: {
          color: '#0d6efd'
        },
        handler: function (response) {
          handlePaymentSuccess(response);
        },
        modal: {
          ondismiss: function () {
            console.log('Payment cancelled by user');
          }
        }
      };

      const rzp = new Razorpay(options);
      rzp.open();
    }

    // Handle successful payment
    async function handlePaymentSuccess(response) {
      try {
        // Verify payment on server
        const verifyResponse = await fetch('/verify_payment', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            razorpay_payment_id: response.razorpay_payment_id,
            razorpay_order_id: response.razorpay_order_id,
            razorpay_signature: response.razorpay_signature,
            plan_id: selectedPlan.plan_id,
            customer: customerDetails
          })
        });

        const verifyData = await verifyResponse.json();

        if (verifyData.success) {
          // Payment successful
          showSuccessMessage();
        } else {
          // Payment verification failed
          showErrorMessage('Payment verification failed. Please contact support.');
        }

      } catch (error) {
        console.error('Error verifying payment:', error);
        showErrorMessage('Payment verification failed. Please contact support.');
      }
    }

    // Show success message
    function showSuccessMessage() {
      // Create success modal
      const successHTML = `
        <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body text-center p-4">
                        <i class="fas fa-check-circle text-success" style="font-size: 4rem;"></i>
                        <h4 class="mt-3">Payment Successful!</h4>
                        <p>Thank you for subscribing to our ${selectedPlan.description}. You will receive a confirmation email shortly.</p>
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Continue</button>
                    </div>
                </div>
            </div>
        </div>
    `;

      document.body.insertAdjacentHTML('beforeend', successHTML);
      const successModal = new bootstrap.Modal(document.getElementById('successModal'));
      successModal.show();

      // Remove modal after closing
      document.getElementById('successModal').addEventListener('hidden.bs.modal', function () {
        this.remove();
      });
    }

    // Show error message
    function showErrorMessage(message) {
      // Create error modal
      const errorHTML = `
        <div class="modal fade" id="errorModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body text-center p-4">
                        <i class="fas fa-exclamation-circle text-danger" style="font-size: 4rem;"></i>
                        <h4 class="mt-3">Payment Failed</h4>
                        <p>${message}</p>
                        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Try Again</button>
                    </div>
                </div>
            </div>
        </div>
    `;

      document.body.insertAdjacentHTML('beforeend', errorHTML);
      const errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
      errorModal.show();

      // Remove modal after closing
      document.getElementById('errorModal').addEventListener('hidden.bs.modal', function () {
        this.remove();
      });
    }

    // Add this to your existing script section

    // Custom plan pricing
    const MEAL_PRICES = {
      breakfast: { veg: 30, nonveg: 35, mixed: 32 },
      lunch: { veg: 50, nonveg: 70, mixed: 60 },
      snacks: { veg: 20, nonveg: 25, mixed: 22 },
      dinner: { veg: 40, nonveg: 60, mixed: 50 }
    };

    const ADDON_PRICES = {
      dessert: { weekly: 200, monthly: 800 },
      biriyani: { weekly: 150, monthly: 600 },
      juice: { daily: 25 }
    };

    // Initialize custom plan modal
    document.addEventListener('DOMContentLoaded', function () {
      // Existing code...

      // Add custom plan event listeners
      document.querySelectorAll('input[name="planType"], input[name="duration"], .meal-check, .addon-check').forEach(input => {
        input.addEventListener('change', calculateCustomPrice);
      });

      // Subscribe custom plan button
      document.getElementById('subscribeCustomPlan').addEventListener('click', handleCustomPlanSubscribe);

      // Calculate initial price
      calculateCustomPrice();
    });

    // Calculate custom plan price
    function calculateCustomPrice() {
      const planType = document.querySelector('input[name="planType"]:checked').value;
      const duration = document.querySelector('input[name="duration"]:checked').value;
      const days = duration === 'weekly' ? 7 : 30;

      let basePrice = 0;
      let breakdown = [];

      // Calculate meal prices
      document.querySelectorAll('.meal-check:checked').forEach(checkbox => {
        const meal = checkbox.value;
        const pricePerDay = MEAL_PRICES[meal][planType];
        const totalMealPrice = pricePerDay * days;
        basePrice += totalMealPrice;

        breakdown.push({
          item: checkbox.nextElementSibling.textContent.split('(')[0].trim(),
          price: totalMealPrice
        });
      });

      // Calculate addon prices
      document.querySelectorAll('.addon-check:checked').forEach(checkbox => {
        const addon = checkbox.value;
        let addonPrice = 0;

        if (addon === 'juice') {
          addonPrice = ADDON_PRICES[addon].daily * days;
        } else {
          addonPrice = ADDON_PRICES[addon][duration];
        }

        basePrice += addonPrice;
        breakdown.push({
          item: checkbox.nextElementSibling.textContent.split('(')[0].trim(),
          price: addonPrice
        });
      });

      // Update price breakdown display
      updatePriceBreakdown(breakdown, basePrice);
    }

    // Update price breakdown display
    function updatePriceBreakdown(breakdown, total) {
      const breakdownHtml = breakdown.map(item => `
        <div class="d-flex justify-content-between mb-2">
            <span>${item.item}</span>
            <span>‚Çπ${item.price}</span>
        </div>
    `).join('');

      document.getElementById('priceBreakdown').innerHTML = breakdownHtml;
      document.getElementById('totalPrice').textContent = `‚Çπ${total}`;
    }

    // Handle custom plan subscription
    function handleCustomPlanSubscribe() {
      const planType = document.querySelector('input[name="planType"]:checked').value;
      const duration = document.querySelector('input[name="duration"]:checked').value;
      const meals = Array.from(document.querySelectorAll('.meal-check:checked')).map(cb => cb.value);
      const addons = Array.from(document.querySelectorAll('.addon-check:checked')).map(cb => cb.value);
      const spiceLevel = document.getElementById('spiceLevel').value;
      const oilPreference = document.getElementById('oilPreference').value;
      const specialInstructions = document.getElementById('specialInstructions').value;

      // Validate at least one meal is selected
      if (meals.length === 0) {
        alert('Please select at least one meal');
        return;
      }

      // Get total price
      const totalPrice = parseInt(document.getElementById('totalPrice').textContent.replace('‚Çπ', ''));

      // Create custom plan object
      const customPlan = {
        plan_id: `custom_${planType}_${duration}`,
        amount: totalPrice * 100, // Convert to paise for Razorpay
        description: `Custom ${planType} ${duration} plan`,
        details: {
          type: planType,
          duration: duration,
          meals: meals,
          addons: addons,
          preferences: {
            spiceLevel: spiceLevel,
            oilPreference: oilPreference,
            specialInstructions: specialInstructions
          }
        }
      };

      // Set as selected plan
      selectedPlan = customPlan;

      // Hide customize modal
      bootstrap.Modal.getInstance(document.getElementById('customizePlanModal')).hide();

      // Show customer info modal
      const customerModal = new bootstrap.Modal(document.getElementById('customerModal'));
      document.getElementById('customerModalLabel').textContent = `Subscribe to ${customPlan.description}`;
      customerModal.show();
    }


  </script>

</body>